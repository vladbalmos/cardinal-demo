function n(n,t){const r=n.replace(/( |:|\/|\.)/g,"-").toLowerCase(),e=t.querySelector(`#${r}`);if(!e)return;e.scrollIntoView({behavior:"smooth"});let u=window.location.href,o="?";-1!==u.indexOf("chapter=")?(u=window.location.href.split("chapter=")[0]).length>0&&(o=u[u.length-1],u=u.substring(0,u.length-1)):o=u.indexOf("?")>0?"&":"?",window.history.pushState({},"",`${u}${`${o}chapter=`}${r}`)}function t(n,t,r=!1,e=null){const u=new CustomEvent(n,t);r&&(e?e.dispatchEvent(u):document.dispatchEvent(u))}function r(n,t,r){let e=null;for(;n;){if(n.matches(t)){e=n;break}if(r&&n.matches(r))break;n=n.parentElement}return e}function e(n){return n.split("").map(n=>n===n.toLowerCase()?n:`-${n.toLowerCase()}`).join("")}function u(n,t,r,e=null){let u=n.replace(t,r);return e?e(u):u}function o(n){return!!n.startsWith("psk-")||["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"].find(t=>t===n)===n}function i(n){let t=this;const r=n.parentEventData&&n.parentEventData;if(!r)return;t.activeChapter=null;let e=null,u=0,o=Array.from(t.element.querySelectorAll("psk-chapter"));o.forEach(n=>{if(null!==e||null!==t.activeChapter)return;const o=n.getAttribute("guid");if(!o)return;const i=n.getElementsByTagName("psk-card")?n.getElementsByTagName("psk-card")[0]:null;if(null===i)return;let l=0;l=u>=i.offsetTop?u+i.offsetTop:i.offsetTop;const a=r.scrollTop;a>=u&&a<=l&&(t.activeChapter=e=o),u=l}),o.length>0&&(t.activeChapter=e||o[0].getAttribute("guid"))}export{o as a,u as b,t as c,r as d,i as h,e as n,n as s};